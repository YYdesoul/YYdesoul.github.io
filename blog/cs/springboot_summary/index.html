<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "/"
        },
        "articleSection" : "blog",
        "name" : "SpringBoot总结",
        "headline" : "SpringBoot总结",
        "description" : "I. 简介 代码
Spring Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。通过这种方式，Spring Boot致力于在蓬勃发展的快速应用开发领域(rapid application development)成为领导者。
随着 Spring 不断的发展，涉及的领域越来越多，项目整合开发需要配合各种各样的文件，慢慢变得不那 么易用简单，违背了最初的理念，甚至人称配置地狱。Spring Boot 正是在这样的一个背景下被抽象出 来的开发框架，目的为了让大家更容易的使用 Spring 、更容易的集成各种常用的中间件、开源软件。
Spring Boot 基于 Spring 开发，Spirng Boot 本身并不提供 Spring 框架的核心特性以及扩展功能，只是 用于快速、敏捷地开发新一代基于 Spring 框架的应用程序。也就是说，它并不是用来替代 Spring 的解 决方案，而是和 Spring 框架紧密结合用于提升 Spring 开发者体验的工具。Spring Boot 以约定大于配 置的核心思想，默认帮我们进行了很多设置，多数 Spring Boot 应用只需要很少的 Spring 配置。同时它 集成了大量常用的第三方库配置(例如 Redis、MongoDB、Jpa、RabbitMQ、Quartz 等等)，Spring Boot 应用中这些第三方库几乎可以零配置的开箱即用。
简单来说就是SpringBoot其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合 了所有的jar包，spring boot整合了所有的框架 。
Spring Boot的主要优点有：
 为所有Spring开发者更快的入门 开箱即用，提供各种默认配置来简化项目配置 内嵌式容器简化Web项目 没有冗余代码生成和XML配置的要求  II. 原理 SpringBoot的启动流程如下图：
SpringBoot原理的核心是自动装配。而自动装配是主启动类来启动的。
自动配置真正实现是从classpath中搜寻所有的META-INF/spring.factories配置文件 ，并将其中对应的org.springframework.boot.autoconfigure. 包下的配置项，通过反射实例化为对应标注了 @Configuration的JavaConfig形式的IOC容器配置类 ， 然后将这些都汇总成为一个实例并加载到IOC容 器中。",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2021",
        "datePublished": "2021-08-31 00:00:00 &#43;0000 UTC",
        "dateModified" : "2021-08-31 00:00:00 &#43;0000 UTC",
        "url" : "/blog/cs/springboot_summary/",
        "wordCount" : "1767",
        "keywords" : [ "计算机","Blog" ]
    }
    </script>
        
            
                <title>SpringBoot总结</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.52" />
        
  
    
  

  

  <link rel="apple-touch-icon-precomposed" href='/favicon/apple-touch-icon-precomposed.png'>
  <link rel="icon" href='/favicon/favicon.png'>
  
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content='/favicon/mstile.png'>
  <meta name="application-name" content="YY的主页">
  <meta name="msapplication-tooltip" content="YY,柏林工大在读学生，主修计算机与经济学。本网站是YY的一些人生感悟和知识分享，希望能让大家的闲暇时光多一份快乐~">
  <meta name="msapplication-config" content='/favicon/ieconfig.xml'>



        
            <meta name="author" content="小羽">
        
        
            
                <meta name="description" content="YY,柏林工大在读学生，主修计算机与经济学。本网站是YY的一些人生感悟和知识分享，希望能让大家的闲暇时光多一份快乐~">
            
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SpringBoot总结"/>
<meta name="twitter:description" content="I. 简介 代码
Spring Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。通过这种方式，Spring Boot致力于在蓬勃发展的快速应用开发领域(rapid application development)成为领导者。
随着 Spring 不断的发展，涉及的领域越来越多，项目整合开发需要配合各种各样的文件，慢慢变得不那 么易用简单，违背了最初的理念，甚至人称配置地狱。Spring Boot 正是在这样的一个背景下被抽象出 来的开发框架，目的为了让大家更容易的使用 Spring 、更容易的集成各种常用的中间件、开源软件。
Spring Boot 基于 Spring 开发，Spirng Boot 本身并不提供 Spring 框架的核心特性以及扩展功能，只是 用于快速、敏捷地开发新一代基于 Spring 框架的应用程序。也就是说，它并不是用来替代 Spring 的解 决方案，而是和 Spring 框架紧密结合用于提升 Spring 开发者体验的工具。Spring Boot 以约定大于配 置的核心思想，默认帮我们进行了很多设置，多数 Spring Boot 应用只需要很少的 Spring 配置。同时它 集成了大量常用的第三方库配置(例如 Redis、MongoDB、Jpa、RabbitMQ、Quartz 等等)，Spring Boot 应用中这些第三方库几乎可以零配置的开箱即用。
简单来说就是SpringBoot其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合 了所有的jar包，spring boot整合了所有的框架 。
Spring Boot的主要优点有：
 为所有Spring开发者更快的入门 开箱即用，提供各种默认配置来简化项目配置 内嵌式容器简化Web项目 没有冗余代码生成和XML配置的要求  II. 原理 SpringBoot的启动流程如下图：
SpringBoot原理的核心是自动装配。而自动装配是主启动类来启动的。
自动配置真正实现是从classpath中搜寻所有的META-INF/spring.factories配置文件 ，并将其中对应的org.springframework.boot.autoconfigure. 包下的配置项，通过反射实例化为对应标注了 @Configuration的JavaConfig形式的IOC容器配置类 ， 然后将这些都汇总成为一个实例并加载到IOC容 器中。"/>

        <meta property="og:title" content="SpringBoot总结" />
<meta property="og:description" content="I. 简介 代码
Spring Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。通过这种方式，Spring Boot致力于在蓬勃发展的快速应用开发领域(rapid application development)成为领导者。
随着 Spring 不断的发展，涉及的领域越来越多，项目整合开发需要配合各种各样的文件，慢慢变得不那 么易用简单，违背了最初的理念，甚至人称配置地狱。Spring Boot 正是在这样的一个背景下被抽象出 来的开发框架，目的为了让大家更容易的使用 Spring 、更容易的集成各种常用的中间件、开源软件。
Spring Boot 基于 Spring 开发，Spirng Boot 本身并不提供 Spring 框架的核心特性以及扩展功能，只是 用于快速、敏捷地开发新一代基于 Spring 框架的应用程序。也就是说，它并不是用来替代 Spring 的解 决方案，而是和 Spring 框架紧密结合用于提升 Spring 开发者体验的工具。Spring Boot 以约定大于配 置的核心思想，默认帮我们进行了很多设置，多数 Spring Boot 应用只需要很少的 Spring 配置。同时它 集成了大量常用的第三方库配置(例如 Redis、MongoDB、Jpa、RabbitMQ、Quartz 等等)，Spring Boot 应用中这些第三方库几乎可以零配置的开箱即用。
简单来说就是SpringBoot其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合 了所有的jar包，spring boot整合了所有的框架 。
Spring Boot的主要优点有：
 为所有Spring开发者更快的入门 开箱即用，提供各种默认配置来简化项目配置 内嵌式容器简化Web项目 没有冗余代码生成和XML配置的要求  II. 原理 SpringBoot的启动流程如下图：
SpringBoot原理的核心是自动装配。而自动装配是主启动类来启动的。
自动配置真正实现是从classpath中搜寻所有的META-INF/spring.factories配置文件 ，并将其中对应的org.springframework.boot.autoconfigure. 包下的配置项，通过反射实例化为对应标注了 @Configuration的JavaConfig形式的IOC容器配置类 ， 然后将这些都汇总成为一个实例并加载到IOC容 器中。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/cs/springboot_summary/" /><meta property="article:published_time" content="2021-08-31T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2021-08-31T00:00:00&#43;00:00"/>

        <meta property="og:image" content="//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        
<meta itemprop="name" content="SpringBoot总结">
<meta itemprop="description" content="I. 简介 代码
Spring Boot是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。通过这种方式，Spring Boot致力于在蓬勃发展的快速应用开发领域(rapid application development)成为领导者。
随着 Spring 不断的发展，涉及的领域越来越多，项目整合开发需要配合各种各样的文件，慢慢变得不那 么易用简单，违背了最初的理念，甚至人称配置地狱。Spring Boot 正是在这样的一个背景下被抽象出 来的开发框架，目的为了让大家更容易的使用 Spring 、更容易的集成各种常用的中间件、开源软件。
Spring Boot 基于 Spring 开发，Spirng Boot 本身并不提供 Spring 框架的核心特性以及扩展功能，只是 用于快速、敏捷地开发新一代基于 Spring 框架的应用程序。也就是说，它并不是用来替代 Spring 的解 决方案，而是和 Spring 框架紧密结合用于提升 Spring 开发者体验的工具。Spring Boot 以约定大于配 置的核心思想，默认帮我们进行了很多设置，多数 Spring Boot 应用只需要很少的 Spring 配置。同时它 集成了大量常用的第三方库配置(例如 Redis、MongoDB、Jpa、RabbitMQ、Quartz 等等)，Spring Boot 应用中这些第三方库几乎可以零配置的开箱即用。
简单来说就是SpringBoot其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合 了所有的jar包，spring boot整合了所有的框架 。
Spring Boot的主要优点有：
 为所有Spring开发者更快的入门 开箱即用，提供各种默认配置来简化项目配置 内嵌式容器简化Web项目 没有冗余代码生成和XML配置的要求  II. 原理 SpringBoot的启动流程如下图：
SpringBoot原理的核心是自动装配。而自动装配是主启动类来启动的。
自动配置真正实现是从classpath中搜寻所有的META-INF/spring.factories配置文件 ，并将其中对应的org.springframework.boot.autoconfigure. 包下的配置项，通过反射实例化为对应标注了 @Configuration的JavaConfig形式的IOC容器配置类 ， 然后将这些都汇总成为一个实例并加载到IOC容 器中。">


<meta itemprop="datePublished" content="2021-08-31T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2021-08-31T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1767">



<meta itemprop="keywords" content="计算机," />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/add-on.css">
            <link rel="stylesheet" href="/css/academicons.min.css">
        

        
            
                
            
        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />
  


      
    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="/">blog</a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/">
                            <i class="fa fa-home">&nbsp;</i>首页
                    </a>
                </li>
            
                <li>
                    <a href="/about/">
                            <i class="fa fa-id-card-o">&nbsp;</i>关于
                    </a>
                </li>
            
                <li>
                    <a href="/blog/">
                            <i class="fa fa-newspaper-o">&nbsp;</i>博客
                    </a>
                </li>
            
                <li>
                    <a href="/itemized/">
                            <i class="fa fa-list">&nbsp;</i>归档
                    </a>
                </li>
            
                <li>
                    <a href="/categories/">
                            <i class="fa fa-sitemap">&nbsp;</i>分类
                    </a>
                </li>
            
                <li>
                    <a href="/tags/">
                            <i class="fa fa-tags">&nbsp;</i>标签
                    </a>
                </li>
            
                <li>
                    <a href="/contact/">
                            <i class="fa fa-envelope-o">&nbsp;</i>联系
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="/">
                    <input type=hidden name=domains value="yanyusoul.com">
                    <input type=hidden name=sitesearch value="yanyusoul.com">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/">
                            <h3>
                                <i class="fa fa-home">&nbsp;</i>首页
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about/">
                            <h3>
                                <i class="fa fa-id-card-o">&nbsp;</i>关于
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/blog/">
                            <h3>
                                <i class="fa fa-newspaper-o">&nbsp;</i>博客
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/itemized/">
                            <h3>
                                <i class="fa fa-list">&nbsp;</i>归档
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories/">
                            <h3>
                                <i class="fa fa-sitemap">&nbsp;</i>分类
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags/">
                            <h3>
                                <i class="fa fa-tags">&nbsp;</i>标签
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/contact/">
                            <h3>
                                <i class="fa fa-envelope-o">&nbsp;</i>联系
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>近期博文</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/cs/git/">Git简明教程</a></h3>
                                
                                <time class="published" datetime=
                                    '2021-08-31'>
                                    August 31, 2021</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/cs/springboot_summary/">SpringBoot总结</a></h3>
                                
                                <time class="published" datetime=
                                    '2021-08-31'>
                                    August 31, 2021</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/cs/docker_summary/">Docker 总结</a></h3>
                                
                                <time class="published" datetime=
                                    '2021-08-30'>
                                    August 30, 2021</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/cs/springmvc_summary/">SpringMVC总结</a></h3>
                                
                                <time class="published" datetime=
                                    '2021-07-14'>
                                    July 14, 2021</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/cs/spring_summary/">Spring总结</a></h3>
                                
                                <time class="published" datetime=
                                    '2021-07-06'>
                                    July 6, 2021</time>
                            </header>
                            

                        </article>
                

                
                    <a href=
                        
                            /blog/
                        
                        class="button">View more posts</a>
                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            



<li>
  <a href="//twitter.com/share?url=%2fblog%2fcs%2fspringboot_summary%2f&amp;text=SpringBoot%e6%80%bb%e7%bb%93&amp;via=" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>




<li>
  <a href="//plus.google.com/share?url=%2fblog%2fcs%2fspringboot_summary%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
  </a>
</li>





<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=%2fblog%2fcs%2fspringboot_summary%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>




<li>
  <a href="//reddit.com/submit?url=%2fblog%2fcs%2fspringboot_summary%2f&amp;title=SpringBoot%e6%80%bb%e7%bb%93" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>




<li>
  <a href="//www.linkedin.com/shareArticle?url=%2fblog%2fcs%2fspringboot_summary%2f&amp;title=SpringBoot%e6%80%bb%e7%bb%93" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>




<li>
  <a href="//www.stumbleupon.com/submit?url=%2fblog%2fcs%2fspringboot_summary%2f&amp;title=SpringBoot%e6%80%bb%e7%bb%93" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
  </a>
</li>




<li>
  <a href="//www.pinterest.com/pin/create/button/?url=%2fblog%2fcs%2fspringboot_summary%2f&amp;description=SpringBoot%e6%80%bb%e7%bb%93" target="_blank" class="share-btn pinterest">
    <i class="fa fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>




<li>
  <a href="mailto:?subject=Check out this post by %e5%b0%8f%e7%be%bd&amp;body=%2fblog%2fcs%2fspringboot_summary%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="title">
        
            <h1><a href="/blog/cs/springboot_summary/">SpringBoot总结</a></h1>
            
        
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2021-08-31'>
            August 31, 2021</time>
        <span class="author">小羽</span>
        
            <p>9 minute read</p>
        
        
    </div>
</header>


  

  

  <div id="content">
    

<h2 id="i-简介">I. 简介</h2>

<p><a href="https://github.com/YYdesoul/springboot-advance-study">代码</a></p>

<p>Spring Boot是由Pivotal团队提供的全新框架，其<strong>设计目的是用来简化新Spring应用的初始搭建以及开发过程</strong>。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。通过这种方式，Spring Boot致力于在蓬勃发展的快速应用开发领域(rapid application development)成为领导者。</p>

<p>随着 Spring 不断的发展，涉及的领域越来越多，项目整合开发需要配合各种各样的文件，慢慢变得不那 么易用简单，违背了最初的理念，甚至人称配置地狱。Spring Boot 正是在这样的一个背景下被抽象出 来的开发框架，目的为了让大家更容易的使用 Spring 、更容易的集成各种常用的中间件、开源软件。</p>

<p>Spring Boot 基于 Spring 开发，Spirng Boot 本身并不提供 Spring 框架的核心特性以及扩展功能，只是 用于快速、敏捷地开发新一代基于 Spring 框架的应用程序。也就是说，它并不是用来替代 Spring 的解 决方案，而是和 Spring 框架紧密结合用于提升 Spring 开发者体验的工具。Spring Boot 以<strong>约定大于配 置的核心思想</strong>，默认帮我们进行了很多设置，多数 Spring Boot 应用只需要很少的 Spring 配置。同时它 集成了大量常用的第三方库配置(例如 Redis、MongoDB、Jpa、RabbitMQ、Quartz 等等)，Spring Boot 应用中这些第三方库几乎可以零配置的开箱即用。</p>

<p>简单来说就是SpringBoot其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合 了所有的jar包，spring boot整合了所有的框架 。</p>

<p>Spring Boot的主要优点有：</p>

<ul>
<li>为所有Spring开发者更快的入门</li>
<li><strong>开箱即用</strong>，提供各种默认配置来简化项目配置</li>
<li>内嵌式容器简化Web项目</li>
<li>没有冗余代码生成和XML配置的要求</li>
</ul>

<h2 id="ii-原理">II. 原理</h2>

<p>SpringBoot的启动流程如下图：</p>

<p><img src="/images/CS/springboot-img/springboot启动流程.png" alt="springboot启动流程" /></p>

<p>SpringBoot原理的核心是自动装配。而自动装配是主启动类来启动的。</p>

<p>自动配置真正实现是从classpath中搜寻所有的META-INF/spring.factories配置文件 ，并将其中对应的org.springframework.boot.autoconfigure. 包下的配置项，通过反射实例化为对应标注了 @Configuration的JavaConfig形式的IOC容器配置类 ， 然后将这些都汇总成为一个实例并加载到IOC容 器中。</p>

<p><strong>结论:</strong></p>

<ol>
<li><p>SpringBoot在启动的时候从类路径下的META-INF/spring.factories中获取 EnableAutoConfiguration指定的值</p></li>

<li><p>将这些值作为自动配置类导入容器 ， 自动配置类就生效 ， 帮我们进行自动配置工作</p></li>

<li><p>整个J2EE的整体解决方案和自动配置都在springboot-autoconfigure的jar包中</p></li>

<li><p>它会给容器中导入非常多的自动配置类 (xxxAutoConfiguration), 就是给容器中导入这个场景需</p>

<p>要的所有组件，并配置好这些组件</p></li>

<li><p>有了自动配置类，免去了我们手动编写配置注入功能组件等的工作</p></li>
</ol>

<p>这个类主要做了以下四件事情:</p>

<ol>
<li>推断应用的类型是普通的项目还是Web项目</li>
<li>查找并加载所有可用初始化器 ， 设置到initializers属性中</li>
<li>找出所有的应用程序监听器，设置到listeners属性中</li>
<li>推断并设置main方法的定义类，找到运行的主类</li>
</ol>

<p><strong>自动装配精髓</strong></p>

<ol>
<li>SpringBoot启动会加载大量的自动配置类</li>
<li>我们看我们需要的功能有没有在SpringBoot默认写好的自动配置类当中</li>
<li>我们再来看这个自动配置类中到底配置了哪些组件 (只要我们要用的组件存在在其中，我们就不需要再手动配置了)</li>
<li>给容器中自动配置类添加组件的时候，会从properties类中获取某些属性。我们只需要在配置文件中 指定这些属性的值即可</li>
</ol>

<p><strong>xxxxAutoConfigurartion</strong>:<strong>自动配置类</strong> 给容器中添加组件</p>

<p><strong>xxxxProperties:封装配置文件中相关属性</strong></p>

<h2 id="iii-使用">III. 使用</h2>

<h3 id="准备工作">准备工作</h3>

<ol>
<li>在idea中选择spring initalizr</li>
<li>勾选初始化组件（一般Web为必选）</li>
<li>可选：在resources中创建并编写application.yml</li>
</ol>

<h3 id="添加一个功能">添加一个功能</h3>

<p>步骤和SpringMVC几乎相同</p>

<ol>
<li><p>创建controller包，并在其之下一个Controller，并编写一个Mapping</p>

<pre><code class="language-java">package com.soul.controller;
    
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
    
@RestController
public class HelloController {
    
    @GetMapping(&quot;/hello&quot;)
    public String hello() {
        return &quot;Hello World&quot;;
    }
}
</code></pre></li>

<li><p>run XXXApplication.java文件</p></li>
</ol>

<p>由此可知，SpringBoot项目是多么简单。</p>

<h2 id="iv-springboot项目结构">IV. SpringBoot项目结构</h2>

<p>SpringBoot项目结构如下：</p>

<p><img src="/images/CS/springboot-img/springboot项目目录.png" alt="springboot项目目录" /></p>

<p>SpringApplication是SpringBoot项目的主启动类，这个类主要做了以下四件事情：</p>

<ol>
<li>推断应用的类型是普通的项目还是Web项目</li>
<li>查找并加载所有可用初始化器 ， 设置到initializers属性中</li>
<li>找出所有的应用程序监听器，设置到listeners属性中</li>
<li>推断并设置main方法的定义类，找到运行的主类</li>
</ol>

<h2 id="iv-yaml语法">IV. yaml语法</h2>

<p>YAML是 &ldquo;YAML Ain&rsquo;t a Markup Language&rdquo; (YAML不是一种标记语言)的递归缩写。 在开发的这种语言时，YAML 的意思其实是:&ldquo;Yet Another Markup Language&rdquo;(仍是一种标记语言) <strong>这种语言以数据做为中心，而不是以标记语言为重点!</strong></p>

<p>yaml语法要点：</p>

<ol>
<li>空格不能省略</li>
<li>以缩进来控制层级关系，只要是左边对齐的一列数据都是同一个层级的</li>
<li>属性和值的大小写都是十分敏感的</li>
</ol>

<h2 id="v-springdata">V. SpringData</h2>

<p>对于数据访问层，无论是 SQL(关系型数据库) 还是 NOSQL(非关系型数据库)，Spring Boot 底层都是采用 Spring Data 的方式进行统一处理。
Spring Boot 底层都是采用 Spring Data 的方式进行统一处理各种数据库，Spring Data 也是 Spring 中与 Spring Boot、Spring Cloud 等齐名的知名项目。</p>

<p>Sping Data 官网：<a href="https://spring.io/projects/spring-data">https://spring.io/projects/spring-data</a></p>

<h3 id="1-集成jdbc">1. 集成JDBC</h3>

<p>步骤如下：</p>

<p>a. 新建项目，记得引入Spring Web、JDBC API和MySQL Driver</p>

<p>b. 导入包（实际上已经自动导入了）：</p>

<pre><code class="language-xml">&lt;dependency&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;mysql&lt;/groupId&gt;
&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>

<p>c. 编写yaml配置数据文件连接数据库：</p>

<pre><code class="language-yml">spring:
  datasource:
    username: root
    password: 123456
    url: jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=UTC
    driver-class-name: com.mysql.cj.jdbc.Driver
</code></pre>

<p>c. 编写测试类测试连接：</p>

<pre><code class="language-java">@SpringBootTest
class SpringbootDataJdbcApplicationTests {
    //DI注入数据源
    @Autowired
    DataSource dataSource;
    @Test
    public void contextLoads() throws SQLException {
    //看一下默认数据源
    System.out.println(dataSource.getClass());
    //获得连接
    Connection connection = dataSource.getConnection();
    System.out.println(connection);
    //关闭连接
    connection.close();
    }
}
</code></pre>

<p>结果：我们可以看到他默认给我们配置的数据源为 : class com.zaxxer.hikari.HikariDataSource ， 我们并没有手动配置</p>

<p><strong>HikariDataSource 号称 Java WEB 当前速度最快的数据源，相比于传统的 C3P0 、DBCP、Tomcat
jdbc 等连接池更加优秀</strong></p>

<p>d. 编写jdbc Controller:</p>

<pre><code class="language-java">package com.soul.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;
import java.util.Map;

@RestController
public class JDBCController {

    @Autowired
    JdbcTemplate jdbcTemplate;

    @GetMapping(&quot;/userList&quot;)
    public List&lt;Map&lt;String, Object&gt;&gt; getUserList() {
        String sql = &quot;select * from user&quot;;
        List&lt;Map&lt;String, Object&gt;&gt; maps = jdbcTemplate.queryForList(sql);
        return maps;
    }

    @GetMapping(&quot;/addUser&quot;)
    public int addUser() {
        String sql = &quot;insert into user(id, name, pwd) VALUES (10, '小明', '123456')&quot;;
        int update = jdbcTemplate.update(sql);
        return update;
    }

    @GetMapping(&quot;/deleteUser/{id}&quot;)
    public int deleteUser(@PathVariable int id) {
        String sql = &quot;delete from user where id = ?&quot;;
        int update = jdbcTemplate.update(sql, id);
        return update;
    }

    @GetMapping(&quot;/updateUser/{id}&quot;)
    public int updateUser(@PathVariable int id) {
        String sql = &quot;update user set name = ?, pwd = ? where id = &quot; + id;
        Object[] objects = new Object[2];
        objects[0] = &quot;小明2&quot;;
        objects[1] = &quot;123&quot;;
        int update = jdbcTemplate.update(sql, objects);
        return update;
    }
}
</code></pre>

<h3 id="2-集成druid">2. 集成Druid</h3>

<p>Java程序很大一部分要操作数据库，为了提高性能操作数据库的时候，又不得不使用数据库连接池。Druid 是阿里巴巴开源平台上一个数据库连接池实现，结合了 C3P0、DBCP 等 DB 池的优点，同时加入了日志监控。</p>

<ul>
<li><p>Druid 可以很好的监控 DB 池连接和 SQL 的执行情况，天生就是针对监控而生的 DB 连接池。</p></li>

<li><p>Druid已经在阿里巴巴部署了超过600个应用，经过一年多生产环境大规模部署的严苛考验。</p></li>
</ul>

<p>Spring Boot 2.0 以上默认使用 Hikari 数据源，可以说 Hikari 与 Driud 都是当前 Java Web 上最优秀的数据源，我们来重点介绍 Spring Boot 如何集成 Druid 数据源，如何实现数据库监控。</p>

<p>Github地址：<a href="https://github.com/alibaba/druid/">https://github.com/alibaba/druid/</a></p>

<p><strong>步骤入下：</strong></p>

<p>a. 添加Druid数据源依赖到pom.xml:</p>

<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;
&lt;dependency&gt;
&lt;groupId&gt;com.alibaba&lt;/groupId&gt;
&lt;artifactId&gt;druid&lt;/artifactId&gt;
&lt;version&gt;1.1.21&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;
&lt;dependency&gt;
&lt;groupId&gt;log4j&lt;/groupId&gt;
&lt;artifactId&gt;log4j&lt;/artifactId&gt;
&lt;version&gt;1.2.17&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>b. 编写application.yml配置文件配置数据库和Druid:</p>

<pre><code class="language-yml">spring:
  datasource:
    username: root
    password: 123456
    url: jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=UTC
    driver-class-name: com.mysql.cj.jdbc.Driver
    type: com.alibaba.druid.pool.DruidDataSource # 自定义数据源

    #Spring Boot 默认是不注入这些属性值的，需要自己绑定
    #druid 数据源专有配置
    initialSize: 5
    minIdle: 5
    maxActive: 20
    maxWait: 60000
    timeBetweenEvictionRunsMillis: 60000
    minEvictableIdleTimeMillis: 300000
    validationQuery: SELECT 1 FROM DUAL
    testWhileIdle: true
    testOnBorrow: false
    testOnReturn: false
    poolPreparedStatements: true
    #配置监控统计拦截的filters，stat:监控统计、log4j：日志记录、wall：防御sql注入
    #如果允许时报错 java.lang.ClassNotFoundException:org.apache.log4j.Priority
    #则导入 log4j 依赖即可，Maven 地址：https://mvnrepository.com/artifact/log4j/log4j
    filters: stat,wall,log4j
    maxPoolPreparedStatementPerConnectionSize: 20
    useGlobalDataSourceStat: true
    connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500
</code></pre>

<p>c. 现在需要程序员自己为 DruidDataSource 绑定全局配置文件中的参数，再添加到容器中，而不再使用 Spring Boot 的自动生成了；我们需要 自己添加 DruidDataSource 组件到容器中，并绑定属性</p>

<pre><code class="language-java">package com.soul.config;

import com.alibaba.druid.pool.DruidDataSource;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import javax.sql.DataSource;

@Configuration
public class DruidConfig {
    /*
    将自定义的 Druid数据源添加到容器中，不再让 Spring Boot 自动创建
    绑定全局配置文件中的 druid 数据源属性到
    com.alibaba.druid.pool.DruidDataSource从而让它们生效
    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)：作用就是将 全局
    配置文件中
    前缀为 spring.datasource的属性值注入到
    com.alibaba.druid.pool.DruidDataSource 的同名参数中
    */
    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)
    @Bean
    public DataSource druidDataSource() {
        return new DruidDataSource();
    }
}
</code></pre>

<p>d. 进行测试：</p>

<pre><code class="language-java">package com.soul;

import com.alibaba.druid.pool.DruidDataSource;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.SQLException;

@SpringBootTest
class SpringbootDruidApplicationTests {

    @Autowired
    DataSource dataSource;

    @Test
    public void contextLoads() throws SQLException {
        //看一下默认数据源
        System.out.println(dataSource.getClass());
        //获得连接
        Connection connection = dataSource.getConnection();
        System.out.println(connection);
        DruidDataSource druidDataSource = (DruidDataSource) dataSource;
        System.out.println(&quot;druidDataSource 数据源最大连接数：&quot; +
                druidDataSource.getMaxActive());
        System.out.println(&quot;druidDataSource 数据源初始化连接数：&quot; +
                druidDataSource.getInitialSize());
        //关闭连接
        connection.close();
    }
}
</code></pre>

<h3 id="3-集成mybatis">3. 集成MyBatis</h3>

<p>官方文档：<a href="http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/">http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</a>
Maven仓库地址：<a href="https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/2.1.1">https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/2.1.1</a></p>

<p><strong>步骤入下：</strong></p>

<p>a. 导入MyBatis依赖到pom.xml：</p>

<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;2.1.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>b. 配置application.yml</p>

<pre><code class="language-yaml">spring:
  datasource:
    username: root
    password: 123456
    #?serverTimezone=UTC解决时区的报错
    url: jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8
    driver-class-name: com.mysql.cj.jdbc.Driver


mybatis:
  # config-location: classpath:mybatis/mybatis-config.xml # 用于配置核心配置文件，如果没有就不需要配置
  mapper-locations: classpath:mybatis/mapper/*.xml # 配置mapper的位置，相当于以前Mybatis中的的mappers(在resources下的位置)
  type-aliases-package: com.soul.pojo # 配置别名
</code></pre>

<p>c. 编写pojo层的实体类：</p>

<pre><code class="language-java">package com.soul.pojo;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class User {

    int id;
    String name;
    String pwd;


}
</code></pre>

<p>d. 编写dao层（mapper层）接口：</p>

<pre><code class="language-java">package com.soul.mapper;

import com.soul.pojo.User;
import org.apache.ibatis.annotations.Mapper;
import org.springframework.stereotype.Repository;

import java.util.List;

@Mapper // 方式一：表示是Mybatis的mapper类，方式二在启动类
@Repository // Dao层，托管到SpringBoot
public interface UserMapper {

    public List&lt;User&gt; getAllUsers();
}
</code></pre>

<p>e. 编写resources/mybatis/mapper下的UserMapper.xml：</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.soul.mapper.UserMapper&quot;&gt;
    &lt;select id=&quot;getAllUsers&quot; resultType=&quot;User&quot;&gt;
        select * from user;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>

<p>f. 进行测试：</p>

<pre><code class="language-java">package com.soul;

import com.soul.mapper.UserMapper;
import com.soul.pojo.User;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;

import javax.sql.DataSource;
import java.util.List;

@SpringBootTest
class SpringbootMybatisApplicationTests {

    @Autowired
    DataSource dataSource;

    @Autowired
    UserMapper userMapper;

    @Test
    void contextLoads() {
    }

    @Test
    void testMyBatis() {
        List&lt;User&gt; users = userMapper.getAllUsers();
        for (User user : users) {
            System.out.println(user);
        }
    }
}

</code></pre>

<h3 id="4-集成elastic-search">4. 集成Elastic Search</h3>

<p>&mdash;&ndash;等待更新&mdash;&mdash;-</p>

<h2 id="vi-springboot进阶">VI. SpringBoot进阶</h2>

<h3 id="1-集成swagger">1. 集成Swagger</h3>

<p><strong>前后端分离</strong>
- 前端 -&gt; 前端控制层、视图层
- 后端 -&gt; 后端控制层、服务层、数据访问层
- 前后端通过API进行交互
- 前后端相对独立且松耦合</p>

<p><strong>产生的问题</strong>
- 前后端集成，前端或者后端无法做到“及时协商，尽早解决”，最终导致问题集中爆发</p>

<p><strong>解决方案</strong></p>

<p>首先定义schema [ 计划的提纲 ]，并实时跟踪最新的API，降低集成风险</p>

<p><strong>Swagger</strong></p>

<ul>
<li>号称世界上最流行的API框架</li>
<li>Restful Api 文档在线自动生成器 =&gt; API 文档 与API 定义同步更新</li>
<li>直接运行，在线测试API</li>
<li>支持多种语言 （如：Java，PHP等）</li>
<li>官网：<a href="https://swagger.io/">https://swagger.io/</a></li>
</ul>

<p><strong>步骤入下</strong>：</p>

<p>a. 新建一个SpringBoot-web项目</p>

<p>b. 在pom.xml中添加swagger依赖：</p>

<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
    &lt;version&gt;2.9.2&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swaggerui--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
    &lt;version&gt;2.9.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>c. 编写swagger配置类：</p>

<pre><code class="language-java">package com.soul.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.bind.annotation.RequestMethod;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.builders.ResponseMessageBuilder;
import springfox.documentation.service.ApiInfo;
import springfox.documentation.service.Contact;
import springfox.documentation.service.ResponseMessage;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

@Configuration
@EnableSwagger2 // 开启swagger2
public class SwaggerConfig {
    // Config bean
    @Bean
    public Docket docket() {

        // 根据环境来开启swagger
        boolean flag = true;

        return new Docket(DocumentationType.SWAGGER_2)
                // 使用自己的全局状态码
                .globalResponseMessage(RequestMethod.GET, responseMessageList)
                .globalResponseMessage(RequestMethod.POST, responseMessageList)
                .globalResponseMessage(RequestMethod.PUT, responseMessageList)
                .globalResponseMessage(RequestMethod.DELETE, responseMessageList)
//                .useDefaultResponseMessages(true)
                .apiInfo(ApiInfo())
                .groupName(&quot;soul&quot;)  // 设置包名
                .enable(flag) // 设置什么环境下开启swagger
                .select()
                .apis(RequestHandlerSelectors.basePackage(&quot;com.soul&quot;))   // 设置扫描包
                .build();
    }

    private ApiInfo ApiInfo() {
        Contact contact = new Contact(&quot;Yu Yan&quot;, &quot;&quot;, &quot;yuyan@qq.com&quot;);

        return new ApiInfo(&quot;My Api Documentation&quot;,
                &quot;My Api&quot;,
                &quot;1.0&quot;,
                &quot;urn:tos&quot;,
                contact,
                &quot;Apache 2.0&quot;,
                &quot;http://www.apache.org/licenses/LICENSE-2.0&quot;,
                new ArrayList());
    }
}
</code></pre>

<p>d. 编写实体类：</p>

<pre><code class="language-java">package com.soul.pojo;

import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@ApiModel   // 设置为swagger Model
@Data
@NoArgsConstructor
@AllArgsConstructor
public class User {
    @ApiModelProperty(&quot;ID号&quot;)    // 设置变量描述
    int id;
    @ApiModelProperty(&quot;名字&quot;)    // 设置变量描述
    String name;
}
</code></pre>

<p>e. 编写Controller:</p>

<pre><code class="language-java">package com.soul.controller;

import com.soul.pojo.User;
import io.swagger.annotations.*;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {
    @ApiOperation(value = &quot;方法名&quot;, notes = &quot;方法描述&quot;)    // 方法描述
    @ApiImplicitParams({
            @ApiImplicitParam(dataType = &quot;int&quot;, name = &quot;id&quot;, paramType = &quot;query&quot;, required = true, value = &quot;id&quot;),
            @ApiImplicitParam(dataType = &quot;int&quot;, name = &quot;name&quot;, paramType = &quot;query&quot;, required = true, value = &quot;名字&quot;)
    })
    @ApiResponses({  // 设置状态码
            @ApiResponse(code = 1000,
                        message = &quot;状态码描述&quot;,
                        response = User.class       // 反射返回类型
                        )
    })
    @GetMapping(&quot;/hello/{id}/{name}&quot;)
    public User hello(@ApiParam(required = true) @PathVariable int id,    // @ApiParam设置swagger，如果设置了ApiImplicitParam,这里的注释会被覆盖
                       @ApiParam(value = &quot;名字&quot;) @PathVariable String name) { // value: 设置描述
        User user = new User(id, name);
        return user;
    }
}

</code></pre>

<p>f. 运行项目，并访问<a href="http://localhost:8080/swagger-ui.html。（Note:">http://localhost:8080/swagger-ui.html。（Note:</a> 界面中可以找到api-docs json格式的访问地址）</p>

<h3 id="2-集成redis">2. 集成Redis</h3>

<p>&mdash;&ndash;等待更新&mdash;&mdash;-</p>

<h2 id="vii-springboot-security">VII. Springboot Security</h2>

<p>步骤：</p>

<ol>
<li><p>配置SecurityConfig</p>

<pre><code class="language-java">package com.soul.config;
    
import org.springframework.context.annotation.Bean;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.provisioning.InMemoryUserDetailsManager;
    
// AOP: 拦截器
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    
    
    // 授权
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // 首页所有人可以访问，功能叶页只有对应有权限的人才能访问
        // 请求授权的规则
        // 链式编程
        http.authorizeRequests()
                .antMatchers(&quot;/&quot;).permitAll()   // 设置首页所有人都可以访问
                .antMatchers(&quot;/level1/**&quot;).hasRole(&quot;vip1&quot;) // 设置/level1/下所有网页的权限
                .antMatchers(&quot;/level2/**&quot;).hasRole(&quot;vip2&quot;)  // 设置/level2/下所有网页的权限
                .antMatchers(&quot;/level3/**&quot;).hasRole(&quot;vip3&quot;); // 设置/level3/下所有网页的权限
    
        // 没有权限默认到登录页,需要开启登录的页面
            // login
//        http.formLogin();
        http.formLogin().loginPage(&quot;/toLogin&quot;).loginProcessingUrl(&quot;/login&quot;)
                        .usernameParameter(&quot;username&quot;)
                        .passwordParameter(&quot;password&quot;);
    
        // 注销, 然后跳转到首页
        http.logout().logoutSuccessUrl(&quot;/&quot;);
    
        // 开启记住我功能
//        http.rememberMe();
    }
    
    // 认证
    // 密码需要加密
//    @Override
//    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
//        auth.inMemoryAuthentication().passwordEncoder(new BCryptPasswordEncoder())
//                .withUser(&quot;xiaoming&quot;).password(new BCryptPasswordEncoder().encode(&quot;123&quot;)).roles(&quot;vip2&quot;, &quot;vip3&quot;)
//                .and()
//                .withUser(&quot;xiaohong&quot;).password(new BCryptPasswordEncoder().encode(&quot;123&quot;)).roles(&quot;vip1&quot;, &quot;vip2&quot;, &quot;vip3&quot;)
//                .and()
//                .withUser(&quot;xiaohua&quot;).password(new BCryptPasswordEncoder().encode(&quot;123&quot;)).roles(&quot;vip1&quot;);
//
//    }
    
    @Bean
    public UserDetailsService users() {
        // The builder will ensure the passwords are encoded before saving in memory
        User.UserBuilder users = User.withDefaultPasswordEncoder();
        UserDetails user = users
                .username(&quot;user&quot;)
                .password(&quot;123&quot;)
                .roles(&quot;vip1&quot;)
                .build();
        UserDetails admin = users
                .username(&quot;admin&quot;)
                .password(&quot;123&quot;)
                .roles(&quot;vip1&quot;, &quot;vip2&quot;, &quot;vip3&quot;)
                .build();
        return new InMemoryUserDetailsManager(user, admin);
    }
}
    
</code></pre></li>

<li><p>编写Controller测试</p>

<pre><code class="language-java">package com.soul.controller;
    
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
    
@Controller
public class RouterController {
    
    @RequestMapping({&quot;/&quot;, &quot;/index&quot;})
    public String index() {
        return &quot;index&quot;;
    }
    
    @RequestMapping(&quot;/toLogin&quot;)
    public String toLogin() {
        return &quot;views/login&quot;;
    }
    
    @RequestMapping(&quot;/level1/{id}&quot;)
    public String level1(@PathVariable(&quot;id&quot;) int id) {
        return &quot;views/level1/&quot; + id;
    }
    
    @RequestMapping(&quot;/level2/{id}&quot;)
    public String level2(@PathVariable(&quot;id&quot;) int id) {
        return &quot;views/level2/&quot; + id;
    }
    
    @RequestMapping(&quot;/level3/{id}&quot;)
    public String level3(@PathVariable(&quot;id&quot;) int id) {
        return &quot;views/level3/&quot; + id;
    }
}
    
</code></pre></li>
</ol>

<h3 id="springboot-集成shiro">Springboot 集成Shiro</h3>

<p>步骤：</p>

<ol>
<li><p>配置ShiroConfig</p>

<pre><code class="language-java">package com.soul.config;
    
import org.apache.shiro.spring.web.ShiroFilterFactoryBean;
import org.apache.shiro.web.mgt.DefaultWebSecurityManager;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
    
import java.util.LinkedHashMap;
import java.util.Map;
    
@Configuration
public class ShiroConfig {
    
    @Bean
    // ShiroFilterFactoryBean
    public ShiroFilterFactoryBean getShiroFilterFactoryBean(@Qualifier(&quot;getDefaultWebSecurityManager&quot;) DefaultWebSecurityManager securityManager) {
        ShiroFilterFactoryBean bean = new ShiroFilterFactoryBean();
        // 设置安全管理器
        bean.setSecurityManager(securityManager);
    
        // 添加shiro的内置过滤器，实现拦截
        /*
            anon: 无需认证就可以访问
            authc: 必须认证了才能访问
            user: 必须拥有记住我功能才能访问
            perms: 拥有某个资源的权限才能访问：
            role: 拥有某个角色权限才能访问
         */
        Map&lt;String, String&gt; filterMap = new LinkedHashMap&lt;&gt;();
    
        // 拦截
//        filterMap.put(&quot;/user/add&quot;, &quot;authc&quot;);
//        filterMap.put(&quot;/user/update&quot;, &quot;authc&quot;);
        filterMap.put(&quot;/user/add&quot;, &quot;perms[user:add]&quot;);
        filterMap.put(&quot;/user/*&quot;, &quot;authc&quot;);
    
        // 授权,正常情况下未授权会调到未授权页面
        bean.setFilterChainDefinitionMap(filterMap);
    
        // 设置登录的请求
        bean.setLoginUrl(&quot;/toLogin&quot;);
        // 未授权页面
        bean.setUnauthorizedUrl(&quot;/noauth&quot;);
    
        return bean;
    }
    
    // DefaulWebSecurityManager
    @Bean
    public DefaultWebSecurityManager getDefaultWebSecurityManager(@Qualifier(&quot;userRealm&quot;) UserRealm userRealm) {
        DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager();
        // 关联UserRealm
        securityManager.setRealm(userRealm);
    
        return securityManager;
    }
    
    // 管理数据：创建 realm对象，需要自定义类
    @Bean
    public UserRealm userRealm() {
        return new UserRealm();
    }
}
</code></pre></li>

<li><p>编写UserRealm</p>

<pre><code class="language-java">package com.soul.config;
    
import com.soul.pojo.User;
import com.soul.service.UserService;
import org.apache.shiro.SecurityUtils;
import org.apache.shiro.authc.*;
import org.apache.shiro.authz.AuthorizationInfo;
import org.apache.shiro.authz.SimpleAuthorizationInfo;
import org.apache.shiro.realm.AuthorizingRealm;
import org.apache.shiro.subject.PrincipalCollection;
import org.apache.shiro.subject.Subject;
import org.springframework.beans.factory.annotation.Autowired;
    
public class UserRealm extends AuthorizingRealm{
    
    @Autowired
    UserService userService;
    
    // 授权
    @Override
    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) {
        System.out.println(&quot;执行了=&gt; 授权doGetAuthorizationInfo&quot;);
    
        SimpleAuthorizationInfo info = new SimpleAuthorizationInfo();
        // 所有人都有add权限了
//        info.addStringPermission(&quot;user:add&quot;);
    
        //
        Subject subject = SecurityUtils.getSubject();
        User currentUser = (User) subject.getPrincipal();
        if (currentUser.getName().equals(&quot;小红&quot;)) {
            info.addStringPermission(&quot;user:add&quot;);
        }
    
        return info;
    }
    
    // 认证
    @Override
    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException {
        System.out.println(&quot;执行了=&gt; 认证doGetAuthenticationInfo&quot;);
    
        // 用户名，密码
//        String name = &quot;root&quot;;
//        String password = &quot;123&quot;;
//        UsernamePasswordToken userToken = (UsernamePasswordToken) token;
//        if (!userToken.getUsername().equals(name)) {
//            return null;    // 抛出异常
//        }
//        // 密码认证shiro做
//        return new SimpleAuthenticationInfo(&quot;&quot;, password, &quot;&quot;);
    
        // 连接真实数据库
        UsernamePasswordToken userToken = (UsernamePasswordToken) token;
        String name = userToken.getUsername();
        User user = userService.getUserByname(name);
        if (user == null) {
            return null;
        }
    
        return new SimpleAuthenticationInfo(user, user.getPwd(), &quot;&quot;);   //第一个参数是想传递的对象
    }
}
    
</code></pre></li>

<li><p>编写Controller和业务</p>

<pre><code class="language-java">package com.soul.controller;
    
import org.apache.shiro.SecurityUtils;
import org.apache.shiro.authc.IncorrectCredentialsException;
import org.apache.shiro.authc.UnknownAccountException;
import org.apache.shiro.authc.UsernamePasswordToken;
import org.apache.shiro.subject.Subject;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
    
@Controller
public class MyController {
    
    @RequestMapping({&quot;/&quot;, &quot;/index&quot;})
    public String indexPage(Model model) {
        model.addAttribute(&quot;msg&quot;, &quot;hello, Shiro&quot;);
        return &quot;index&quot;;
    }
    
    @RequestMapping(&quot;/user/add&quot;)
    public String add() {
        return &quot;user/add&quot;;
    }
    
    @RequestMapping(&quot;/user/update&quot;)
    public String update() {
        return &quot;user/update&quot;;
    }
    
    @RequestMapping(&quot;/toLogin&quot;)
    public String toLogin() {
        return &quot;login&quot;;
    }
    
    @RequestMapping(&quot;/login&quot;)
    public String login(String username, String password, Model model) {
        // 获取当前的用户
        Subject subject = SecurityUtils.getSubject();
        // 封装用户的登录数据
        UsernamePasswordToken token = new UsernamePasswordToken(username, password);
    
        try {
            subject.login(token);   // 执行登录的方法，如果没有异常就ok了
            return &quot;index&quot;;
        } catch (UnknownAccountException e) {
            model.addAttribute(&quot;msg&quot;, &quot;用户名错误&quot;);
            return &quot;login&quot;;
        } catch (IncorrectCredentialsException e) {
            model.addAttribute(&quot;msg&quot;, &quot;密码错误&quot;);
            return &quot;login&quot;;
        }
    }
    
    @RequestMapping(&quot;/noauth&quot;)
    @ResponseBody
    public String unauthorized() {
        return &quot;未经授权无法访问此页面&quot;;
    }
    
}
    
</code></pre></li>
</ol>

<h2 id="viii-springboot-分布式">VIII. Springboot 分布式</h2>

<p>&mdash;&ndash;等待更新&mdash;&mdash;-</p>

<h2 id="ix-总结">IX. 总结</h2>

<p>SpringBoot 作为目前最流行的Java框架极大的简化了开发难度，提高了开发效率。</p>

<h2 id="x-参考">X. 参考</h2>

<p><a href="https://www.bilibili.com/video/BV1PE411i7CV?from=search&amp;seid=13016883367823460882">狂神说</a></p>

  </div>

  <footer>
    <ul class="stats">
  <li class="categories">
    <ul>
        
            
            
                <i class="fa fa-folder"></i>
                
                
                <li><a class="article-category-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA">计算机</a></li>
                
            
        
    </ul>
  </li>
  <li class="tags">
    <ul>
        
            
            
                <i class="fa fa-tags"></i>
                
                
                <li><a class="article-category-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA">计算机</a></li>
                
            
        
    </ul>
  </li>
</ul>

  </footer>

</article>


<ul class="actions pagination">
    
        <li><a href="/blog/cs/docker_summary/"
                class="button big previous">Docker 总结</a></li>
    

    
        <li><a href="/blog/cs/git/"
                class="button big next">Git简明教程</a></li>
    
</ul>


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
      
        <a href='/' class="logo"><img src="/img/main/logo.jpeg" alt="Hugo Future Imperfect" /></a>
      
    
    
      <header>
        <h2>YY的主页</h2>
        <p>YY,柏林工大在读学生，主修计算机与经济学。本网站是YY的一些人生感悟和知识分享，希望能让大家的闲暇时光多一份快乐~</p>
      </header>
    
    
      <ul class="icons">
        
          
    <li><a href="/index.xml" type="application/rss+xml" target="_blank" title="RSS" class="fa fa-rss"></a></li>


        
        
  <li><a href="//github.com/YYdesoul" target="_blank" title="GitHub" class="fa fa-github"></a></li>

























  <li><a href="//linkedin.com/in/example" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>











  <li><a href="//facebook.com/oEn.de.soul" target="_blank" title="Facebook" class="fa fa-facebook"></a></li>





















  <li><a href="//instagram.com/example" target="_blank" title="Instagram" class="fa fa-instagram"></a></li>























  <li><a href="mailto:example" title="Email" class="fa fa-envelope"></a></li>


      </ul>
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>近期博文</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/cs/git/">Git简明教程</a>
              </h3>
              
              <time class="published" datetime='2021-08-31'>
                August 31, 2021
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/cs/springboot_summary/">SpringBoot总结</a>
              </h3>
              
              <time class="published" datetime='2021-08-31'>
                August 31, 2021
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/cs/docker_summary/">Docker 总结</a>
              </h3>
              
              <time class="published" datetime='2021-08-30'>
                August 30, 2021
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/cs/springmvc_summary/">SpringMVC总结</a>
              </h3>
              
              <time class="published" datetime='2021-07-14'>
                July 14, 2021
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/cs/spring_summary/">Spring总结</a>
              </h3>
              
              <time class="published" datetime='2021-07-06'>
                July 6, 2021
              </time>
            </header>
            

          </article>
        
      </div>

      
        <a href=
          
            /blog/
          
        class="button">更多博文</a>
      
    </div>
  </section>

  
  
  
  
  
    <section id="categories">
      <header>
        <h3>
          <a href="/categories/">分类</a>
        </h3>
      </header>
        
          
        

        
        <p>
          <article>
            <header>
              
                <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/">计算机</a>
                <span style="float:right;">15</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/%E8%AF%BB%E4%B9%A6%E5%88%86%E4%BA%AB/">读书分享</a>
                <span style="float:right;">5</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/%E5%BD%92%E6%A1%A3/">归档</a>
                <span style="float:right;">3</span>
              
            </header>
          </article>
        </p>
        
        <p>
          <article>
            <header>
              
                <a href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a>
                <span style="float:right;">1</span>
              
            </header>
          </article>
        </p>
        
    </section>
  
  

  
  
    <section id="mini-bio">
      <h3>关于</h3>
      <p>关于博主的一些信息。</p>
      <a href="/about/" class="button">更多</a>
    </section>
  

  
  <section id="footer">
    
      <ul class="icons">
        
          
    <li><a href="/index.xml" type="application/rss+xml" target="_blank" title="RSS" class="fa fa-rss"></a></li>


        
        
  <li><a href="//github.com/YYdesoul" target="_blank" title="GitHub" class="fa fa-github"></a></li>

























  <li><a href="//linkedin.com/in/example" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>











  <li><a href="//facebook.com/oEn.de.soul" target="_blank" title="Facebook" class="fa fa-facebook"></a></li>





















  <li><a href="//instagram.com/example" target="_blank" title="Instagram" class="fa fa-instagram"></a></li>























  <li><a href="mailto:example" title="Email" class="fa fa-envelope"></a></li>


      </ul>
    
    <p class="copyright">
      
        &copy; 2021
        
          YY的主页
        
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/css.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
      <script src="/js/backToTop.js"></script>
    

    
      
        
      
    

    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  </body>
</html>

